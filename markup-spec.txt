encoded in UTF-8
Lines=terminated with CR (U+000D), CR/LF (U+000D U+000A), LF (U+000A)
Tab (U+0009)=8 spaces
blank line=2 consecutive EOL /?/ with white space between
Trailing white space has no meaning, not preserved
AST=built of tagged elements, strings
AST=root 1 element whose tag=`body`,children=elements
Normal ¶s=blocks of text separated by /+/ blank lines
Normal ¶s ? contain 1 EOL=spaces
body of ¶ ? contain tagged markup
tag of ¶=`p`
Header=¶ with leading `*`s followed by 1 space
more stars lower in hierarchy header
content of header=everything after `*`, space, otherwise parsed like ¶
Header=tagged with `h`number of stars
Block quotes=1 of 3 “sections” indicated by indentation
section ends at EOF/by occurrence of less-indented non-blank line
Sections nest
block quote=2 indent relative to enclosing section, ? contain ¶s, headers, lists, verbatim sections
Block quote=tagged with `blockquote`
Verbatim sections=indent 3 relative to enclosing section
verbatim section all text=captured exactly as is
Verbatim section=tagged with `pre`
Lists=2 indent followed by list marker, either `#` for ordered list/`-` for unordered list
ordered list=tagged with `ol`, unordered with `ul`
list marker=followed by space, then text of 1st list item
List items=tagged with `li`, contain ¶s, contents=indented to line up under 1st character of beginning of list item
Subsequent items=marked with list marker in same column as original list marker, 1 space
normal text (!verbatim section) link=enclosing text to act as hyperlink with `[]`s=element tagged `link`
text between `[]`s includes `|`, text after `|`=wrapped in `key` element
¶ solely text in `[]`s followed by /*/ spaces followed by text enclosed in `<>`s=element tagged `link_def` children=`link` element comprising text between `[]`s, `url` element comprising text between `<>`s
in-text `link` elements hyperlinks with `link` text linking to URL in corresponding `link_def` element
other markup, uses TeX-like notation `\tagname{stuff}`
Tag names consist of letters, numbers, `-`, `.`, `+`
Tagged markup ? nest
element from tagged markup=tagged with tagname
Certain tag names ?=sub-documents parsed differently than simple spans of text
content of sub-document=between opening, closing {}s=document, contain /+/ ¶, ?contain headers, block quotes, lists, verbatim sections, nested sub-documents
Footnotes=parsed as sub-documents
blank line separating ¶s of sub-document no effect enclosing ¶
If sub-document=part of indented section then subsequent lines of sub-document indented as enclosing ¶
specify certain tag names parsed as sub-documents rather than character markup
!verbatim section, backslash escape any not legal tag name character
`\`, `{`, `}`=escaped outside verbatim section
non-tag-name characters=escaped anytime, only necessary when have syntactic significance
`*` not escaped except at beginning of ¶, where `*` mark ¶ as header
starting with `-*-` indicates modeline
strip modelines at top level of document to save strip modelines later in processing
trivial mapping from AST to XML: element mapped to XML element with same name, string as text
